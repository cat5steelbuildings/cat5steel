<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Cat 5 Steel Buildings — Get Your Free Quote</title>
<link href="https://fonts.googleapis.com/css2?family=Bebas+Neue&family=DM+Sans:wght@300;400;500;600;700&display=swap" rel="stylesheet">
<style>
:root {
  --bg:#0c0e13;--sf:#13161d;--sf2:#1a1d26;--bd:#252a36;--bd2:#333a4a;
  --tx:#d4d8e0;--tx2:#8891a3;--wh:#fff;--ac:#c8553a;--ac2:#e07357;
  --gd:#d4a853;--gn:#4a9b6f;--r:6px;
}
*{margin:0;padding:0;box-sizing:border-box;}
body{font-family:'DM Sans',sans-serif;background:var(--bg);color:var(--tx);min-height:100vh;}

/* HEADER */
.hdr{background:var(--sf);border-bottom:1px solid var(--bd);padding:14px 24px;display:flex;align-items:center;justify-content:space-between;position:sticky;top:0;z-index:100;}
.hdr::after{content:'';position:absolute;bottom:0;left:0;right:0;height:2px;background:linear-gradient(90deg,transparent,var(--ac),transparent);}
.hdr-brand{display:flex;align-items:center;gap:12px;}
.hdr-hex{width:38px;height:38px;background:var(--ac);display:flex;align-items:center;justify-content:center;clip-path:polygon(50% 0%,100% 25%,100% 75%,50% 100%,0% 75%,0% 25%);}
.hdr-hex span{font-family:'Bebas Neue',sans-serif;font-size:15px;color:#fff;letter-spacing:1px;}
.hdr-info h1{font-family:'Bebas Neue',sans-serif;font-size:22px;color:#fff;letter-spacing:3px;line-height:1;}
.hdr-info p{font-size:9px;color:var(--tx2);letter-spacing:3px;text-transform:uppercase;}
.hdr-right{display:flex;align-items:center;gap:14px;}
.badge{font-size:10px;color:var(--tx2);font-weight:600;letter-spacing:1px;text-transform:uppercase;display:flex;align-items:center;gap:4px;}
.badge::before{content:'';width:5px;height:5px;background:var(--ac);border-radius:50%;}
.hdr-call{display:flex;align-items:center;gap:6px;border:1px solid var(--bd2);color:#fff;padding:7px 14px;font-size:12px;font-weight:600;text-decoration:none;font-family:'DM Sans',sans-serif;letter-spacing:1px;transition:0.2s;}
.hdr-call:hover{border-color:var(--ac);color:var(--ac2);}
.hdr-call svg{width:13px;height:13px;stroke:currentColor;fill:none;stroke-width:2;}

/* HERO */
.hero{text-align:center;padding:36px 24px 16px;max-width:660px;margin:0 auto;}
.hero h2{font-family:'Bebas Neue',sans-serif;font-size:40px;color:#fff;letter-spacing:4px;line-height:1.1;margin-bottom:6px;}
.hero h2 em{font-style:normal;color:var(--ac2);}
.hero p{font-size:14px;color:var(--tx2);line-height:1.6;}
.hero .slogan{font-size:12px;color:var(--gd);font-weight:600;letter-spacing:2px;text-transform:uppercase;margin-top:10px;}

/* PROGRESS */
.prog{max-width:620px;margin:18px auto 0;padding:0 24px;}
.prog-track{height:3px;background:var(--bd);border-radius:2px;overflow:hidden;}
.prog-fill{height:100%;background:linear-gradient(90deg,var(--ac),var(--ac2));transition:width 0.4s ease;width:0%;}
.prog-labels{display:flex;justify-content:space-between;margin-top:5px;}
.prog-labels span{font-size:9px;color:var(--tx2);letter-spacing:0.5px;text-transform:uppercase;transition:0.3s;}
.prog-labels span.active{color:var(--ac2);font-weight:600;}
.prog-labels span.done{color:var(--gn);}

/* STEPS */
.steps{max-width:620px;margin:22px auto;padding:0 24px 120px;}
.step{display:none;animation:stepIn 0.3s ease-out;scroll-margin-top:80px;}
.step.active{display:block;}
@keyframes stepIn{from{opacity:0;transform:translateY(14px);}to{opacity:1;transform:translateY(0);}}
.step-q{font-family:'Bebas Neue',sans-serif;font-size:22px;color:#fff;letter-spacing:2px;margin-bottom:3px;}
.step-sub{font-size:13px;color:var(--tx2);margin-bottom:16px;line-height:1.5;}

/* STYLE CARDS */
.style-grid{display:grid;grid-template-columns:repeat(3,1fr);gap:10px;}
.scard{background:var(--sf);border:2px solid var(--bd);border-radius:var(--r);overflow:hidden;cursor:pointer;transition:all 0.2s;position:relative;}
.scard:hover{border-color:var(--bd2);transform:translateY(-2px);}
.scard.sel{border-color:var(--ac);box-shadow:0 0 16px rgba(200,85,58,0.12);}
.scard img{width:100%;height:95px;object-fit:cover;display:block;}
.scard .sl{padding:7px 8px;font-size:11px;font-weight:700;color:var(--tx);text-align:center;letter-spacing:0.5px;text-transform:uppercase;}
.scard.sel .sl{color:var(--ac2);}
.scard .ck{position:absolute;top:5px;right:5px;width:22px;height:22px;background:var(--ac);border-radius:50%;display:none;align-items:center;justify-content:center;}
.scard.sel .ck{display:flex;}
.cksvg{width:12px;height:12px;stroke:#fff;fill:none;stroke-width:3;}

/* SELECTS */
.srow{display:flex;gap:10px;flex-wrap:wrap;align-items:center;margin-bottom:12px;}
.srow label{font-size:12px;color:var(--tx2);font-weight:500;min-width:52px;}
.sf{flex:1;min-width:120px;padding:11px 14px;background:var(--sf2);border:1px solid var(--bd);border-radius:var(--r);color:#fff;font-size:14px;font-family:'DM Sans',sans-serif;outline:none;appearance:none;cursor:pointer;background-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' viewBox='0 0 24 24' fill='none' stroke='%238891a3' stroke-width='2'%3E%3Cpolyline points='6 9 12 15 18 9'/%3E%3C/svg%3E");background-repeat:no-repeat;background-position:right 12px center;transition:border-color 0.2s;}
.sf:focus{border-color:var(--ac);}
.sf option{background:var(--sf2);color:#fff;}

/* COUNTERS */
.cgroup{display:flex;flex-direction:column;gap:10px;margin-bottom:10px;}
.citem{display:flex;align-items:center;gap:14px;background:var(--sf);border:1px solid var(--bd);border-radius:var(--r);padding:10px 14px;}
.citem .ci-l{flex:1;}
.citem .ci-n{font-size:13px;font-weight:600;color:var(--tx);}
.citem .ci-d{font-size:11px;color:var(--tx2);}
.cbox{display:flex;align-items:center;border:1px solid var(--bd);border-radius:var(--r);overflow:hidden;background:var(--sf2);}
.cbox button{width:34px;height:34px;background:var(--sf);border:none;color:var(--tx2);font-size:17px;cursor:pointer;display:flex;align-items:center;justify-content:center;transition:0.15s;font-family:'DM Sans',sans-serif;}
.cbox button:hover{background:var(--bd);color:#fff;}
.cbox .cv{width:36px;text-align:center;font-size:14px;font-weight:700;color:#fff;background:var(--sf2);line-height:34px;}

/* OPTIONS */
.olist{display:flex;flex-direction:column;gap:8px;}
.oitem{display:flex;align-items:center;gap:12px;background:var(--sf);border:1px solid var(--bd);border-radius:var(--r);padding:12px 14px;cursor:pointer;transition:0.2s;}
.oitem:hover{border-color:var(--bd2);}
.oitem.on{border-color:var(--ac);background:rgba(200,85,58,0.06);}
.obox{width:20px;height:20px;border:2px solid var(--bd2);border-radius:3px;flex-shrink:0;display:flex;align-items:center;justify-content:center;transition:0.2s;}
.oitem.on .obox{background:var(--ac);border-color:var(--ac);}
.obox svg{width:12px;height:12px;stroke:#fff;fill:none;stroke-width:3;opacity:0;transition:0.15s;}
.oitem.on .obox svg{opacity:1;}
.oi-n{font-size:13px;font-weight:600;color:var(--tx);}
.oi-d{font-size:11px;color:var(--tx2);margin-top:1px;}

/* CONCRETE FEATURED CARD */
.con-card{background:linear-gradient(135deg,rgba(212,168,83,0.08),rgba(212,168,83,0.03));border:2px solid rgba(212,168,83,0.3);border-radius:var(--r);padding:16px 18px;margin-bottom:16px;cursor:pointer;transition:0.25s;position:relative;overflow:hidden;}
.con-card::before{content:'';position:absolute;top:0;left:0;width:4px;height:100%;background:var(--gd);}
.con-card:hover{border-color:rgba(212,168,83,0.5);}
.con-card.on{border-color:var(--gd);background:rgba(212,168,83,0.12);box-shadow:0 0 20px rgba(212,168,83,0.08);}
.con-card .con-top{display:flex;align-items:center;justify-content:space-between;gap:12px;}
.con-card .con-left{display:flex;align-items:center;gap:12px;}
.con-card .con-check{width:22px;height:22px;border:2px solid rgba(212,168,83,0.4);border-radius:3px;flex-shrink:0;display:flex;align-items:center;justify-content:center;transition:0.2s;}
.con-card.on .con-check{background:var(--gd);border-color:var(--gd);}
.con-card .con-check svg{width:13px;height:13px;stroke:#fff;fill:none;stroke-width:3;opacity:0;transition:0.15s;}
.con-card.on .con-check svg{opacity:1;}
.con-card .con-title{font-family:'Bebas Neue',sans-serif;font-size:18px;color:var(--gd);letter-spacing:2px;}
.con-card .con-sub{font-size:12px;color:var(--tx2);margin-top:2px;}
.con-card .con-price{text-align:right;}
.con-card .con-price .big{font-family:'Bebas Neue',sans-serif;font-size:28px;color:var(--gd);letter-spacing:1px;line-height:1;}
.con-card .con-price .sm{font-size:10px;color:var(--tx2);letter-spacing:0.5px;text-transform:uppercase;}
.con-divider{display:flex;align-items:center;gap:12px;margin:14px 0 10px;font-size:10px;color:var(--tx2);letter-spacing:2px;text-transform:uppercase;}
.con-divider::before,.con-divider::after{content:'';flex:1;height:1px;background:var(--bd);}

/* RADIO */
.rgroup{display:flex;flex-direction:column;gap:8px;}
.ritem{display:flex;align-items:center;gap:12px;background:var(--sf);border:1px solid var(--bd);border-radius:var(--r);padding:12px 14px;cursor:pointer;transition:0.2s;}
.ritem:hover{border-color:var(--bd2);}
.ritem.on{border-color:var(--ac);background:rgba(200,85,58,0.06);}
.rdot{width:18px;height:18px;border:2px solid var(--bd2);border-radius:50%;flex-shrink:0;position:relative;transition:0.2s;}
.ritem.on .rdot{border-color:var(--ac);}
.rdot::after{content:'';position:absolute;top:3px;left:3px;width:8px;height:8px;background:var(--ac);border-radius:50%;opacity:0;transition:0.15s;}
.ritem.on .rdot::after{opacity:1;}
.ri-n{font-size:13px;font-weight:600;color:var(--tx);}
.ri-d{font-size:11px;color:var(--tx2);margin-top:1px;}

/* TEXT AREA */
.tarea{width:100%;min-height:100px;padding:12px 14px;background:var(--sf2);border:1px solid var(--bd);border-radius:var(--r);color:#fff;font-size:14px;font-family:'DM Sans',sans-serif;outline:none;resize:vertical;line-height:1.6;transition:border-color 0.2s;}
.tarea::placeholder{color:var(--tx2);}
.tarea:focus{border-color:var(--ac);}

/* LEAD FORM */
.lf{width:100%;padding:12px 14px;background:var(--sf2);border:1px solid var(--bd);border-radius:var(--r);color:#fff;font-size:14px;font-family:'DM Sans',sans-serif;outline:none;margin-bottom:10px;transition:border-color 0.2s;}
.lf::placeholder{color:var(--tx2);}
.lf:focus{border-color:var(--ac);}

/* BUTTONS */
.btn{display:inline-flex;align-items:center;justify-content:center;gap:6px;padding:12px 28px;background:var(--ac);color:#fff;border:none;border-radius:var(--r);font-size:14px;font-weight:600;font-family:'DM Sans',sans-serif;cursor:pointer;transition:0.2s;letter-spacing:0.3px;}
.btn:hover{background:var(--ac2);}
.btn:disabled{opacity:0.35;cursor:not-allowed;}
.btn-row{display:flex;gap:10px;margin-top:16px;flex-wrap:wrap;}
.btn-ghost{background:0;border:1px solid var(--bd2);color:var(--tx2);}
.btn-ghost:hover{border-color:var(--tx2);color:#fff;background:0;}
.btn-big{width:100%;padding:15px;font-size:18px;font-family:'Bebas Neue',sans-serif;letter-spacing:3px;font-weight:400;}
.btn-green{background:var(--gn);}
.btn-green:hover{background:#3a8a5e;}

/* CONFIRM */
.conf{background:var(--sf);border:1px solid var(--bd);border-radius:var(--r);padding:30px;text-align:center;}
.conf .big-ck{width:60px;height:60px;background:var(--gn);border-radius:50%;display:flex;align-items:center;justify-content:center;margin:0 auto 16px;}
.conf .big-ck svg{width:28px;height:28px;stroke:#fff;fill:none;stroke-width:3;}
.conf h3{font-family:'Bebas Neue',sans-serif;font-size:26px;color:#fff;letter-spacing:3px;margin-bottom:6px;}
.conf p{font-size:13px;color:var(--tx2);line-height:1.6;}
.conf a{color:var(--ac2);font-weight:600;text-decoration:none;}

/* PROMO BANNERS */
.promo-banners{margin-top:20px;display:flex;flex-direction:column;gap:12px;max-width:480px;margin-left:auto;margin-right:auto;}
.promo-link{display:block;border-radius:var(--r);overflow:hidden;transition:transform 0.2s,box-shadow 0.2s;border:2px solid transparent;}
.promo-link:hover{transform:scale(1.02);box-shadow:0 4px 20px rgba(200,85,58,0.3);border-color:var(--ac);}
.promo-img{width:100%;height:auto;display:block;}

/* FLOATING CALL BUTTON */
.float-call{position:fixed;bottom:20px;right:20px;z-index:999;display:flex;align-items:center;gap:8px;background:var(--ac);color:#fff;padding:12px 20px;border-radius:50px;text-decoration:none;font-size:13px;font-weight:700;font-family:'DM Sans',sans-serif;letter-spacing:0.5px;box-shadow:0 4px 20px rgba(200,85,58,0.4);transition:all 0.25s;animation:floatPulse 2s infinite;}
.float-call:hover{background:var(--ac2);transform:scale(1.05);box-shadow:0 6px 28px rgba(200,85,58,0.5);}
.float-call svg{width:16px;height:16px;stroke:currentColor;fill:none;stroke-width:2;}
@keyframes floatPulse{0%,100%{box-shadow:0 4px 20px rgba(200,85,58,0.4);}50%{box-shadow:0 4px 28px rgba(200,85,58,0.6);}}

/* WIND RATING CARDS */
.wind-grid{display:grid;grid-template-columns:repeat(3,1fr);gap:10px;}
.wcard{background:var(--sf);border:2px solid var(--bd);border-radius:var(--r);padding:18px 14px;cursor:pointer;transition:all 0.2s;text-align:center;position:relative;}
.wcard:hover{border-color:var(--bd2);transform:translateY(-2px);}
.wcard.sel{border-color:var(--ac);box-shadow:0 0 16px rgba(200,85,58,0.12);}
.wcard.sel.cat5{border-color:var(--gd);box-shadow:0 0 20px rgba(212,168,83,0.15);}
.wcard .wmph{font-family:'Bebas Neue',sans-serif;font-size:36px;color:#fff;letter-spacing:2px;line-height:1;}
.wcard.sel .wmph{color:var(--ac2);}
.wcard.sel.cat5 .wmph{color:var(--gd);}
.wcard .wlabel{font-size:11px;color:var(--tx2);font-weight:600;letter-spacing:1px;text-transform:uppercase;margin-top:4px;}
.wcard .wtag{font-size:10px;color:var(--tx2);margin-top:6px;line-height:1.4;}
.wcard .ck{position:absolute;top:5px;right:5px;width:22px;height:22px;background:var(--ac);border-radius:50%;display:none;align-items:center;justify-content:center;}
.wcard.sel .ck{display:flex;}
.wcard.sel.cat5 .ck{background:var(--gd);}
.wcard .cat5badge{display:inline-block;background:linear-gradient(135deg,rgba(212,168,83,0.15),rgba(212,168,83,0.08));border:1px solid rgba(212,168,83,0.3);border-radius:3px;padding:2px 8px;font-size:9px;color:var(--gd);font-weight:700;letter-spacing:1.5px;text-transform:uppercase;margin-top:8px;}

/* RESPONSIVE */
@media(max-width:640px){
  .hdr{padding:10px 14px;}
  .hdr-info h1{font-size:17px;letter-spacing:2px;}
  .badge{display:none;}
  .hero h2{font-size:30px;}
  .style-grid{grid-template-columns:repeat(2,1fr);}
  .wind-grid{grid-template-columns:1fr 1fr 1fr;}
  .srow{flex-direction:column;align-items:stretch;gap:6px;}
  .sf{min-width:100%;}
  .steps{padding:0 14px 120px;}
}
@media(max-width:400px){
  .wind-grid{grid-template-columns:1fr;}
}
</style>
</head>
<body>

<header class="hdr">
  <div class="hdr-brand">
    <img src="logo.png" alt="Cat 5 Steel Buildings" style="height:44px;width:44px;border-radius:50%;object-fit:cover;">
    <div class="hdr-info">
      <h1>CAT 5 STEEL BUILDINGS</h1>
      <p>HURRICANE CERTIFIED &bull; TURNKEY</p>
    </div>
  </div>
  <div class="hdr-right">
    <div class="badge">180 MPH RATED</div>
    <div class="badge">FL / GA / AL</div>
    <a href="tel:8503208186" class="hdr-call">
      <svg viewBox="0 0 24 24"><path d="M22 16.92v3a2 2 0 01-2.18 2 19.79 19.79 0 01-8.63-3.07 19.5 19.5 0 01-6-6 19.79 19.79 0 01-3.07-8.67A2 2 0 014.11 2h3a2 2 0 012 1.72c.127.96.361 1.903.7 2.81a2 2 0 01-.45 2.11L8.09 9.91a16 16 0 006 6l1.27-1.27a2 2 0 012.11-.45c.907.339 1.85.573 2.81.7A2 2 0 0122 16.92z"/></svg>
      (850) 320-8186
    </a>
  </div>
</header>
  <!-- Hero Ad Banner -->
  <div style="text-align:center; padding:10px 16px 0;">
    <img src="hero-ad.png" alt="Cat 5 Steel Buildings - When You Need Strong" style="max-width:100%; height:auto; border-radius:10px;">
  </div>


<div class="hero">
  <h2>Our Appologies! <em>Working On Phone System</em> Use This Alt Phone # (850)371-4594</h2>
  <p>Answer a few questions and we'll put together your custom building estimate — no pressure, no hidden fees.</p>
  <div class="slogan">We handle everything — so you don't have to.</div>
</div>

<div class="prog">
  <div class="prog-track"><div class="prog-fill" id="progFill"></div></div>
  <div class="prog-labels" id="progLabels">
    <span class="active">Location</span>
    <span>Style</span>
    <span>Size</span>
    <span>Wind</span>
    <span>Doors</span>
    <span>Frame-Outs</span>
    <span>Lean-To</span>
    <span>Options</span>
    <span>Details</span>
    <span>Contact</span>
  </div>
</div>

<div class="steps" id="stepsWrap">

  <!-- STEP 0: ZIP -->
  <div class="step active" id="step0">
    <style>
      .zip-row{display:flex;align-items:center;justify-content:center;gap:12px;flex-wrap:nowrap;}
      .start-arrow{animation:arrowNudge 1.6s ease-in-out infinite;flex-shrink:0;}
      .start-arrow-inner{display:inline-flex;align-items:center;gap:6px;
        background:linear-gradient(135deg,#c8960c,#f5c842,#c8960c);
        padding:7px 18px 7px 14px;border-radius:40px;
        box-shadow:0 3px 16px rgba(245,200,66,0.5),0 0 30px rgba(245,200,66,0.2);
        border:2px solid #e0a800;white-space:nowrap;}
      .start-chevron-left{width:28px;height:22px;flex-shrink:0;}
      .start-txt{font-family:'Bebas Neue',sans-serif;font-size:20px;letter-spacing:3px;
        color:#1a1a2e;text-shadow:0 1px 0 rgba(255,255,255,0.3);font-weight:700;}
      @keyframes arrowNudge{0%,100%{transform:translateX(0);}50%{transform:translateX(-6px);}}
    </style>
    <div class="step-q">WHAT'S YOUR ZIP CODE?</div>
    <div class="step-sub">We serve Florida, Georgia & Alabama — let's confirm you're in our area.</div>
    <div class="zip-row">
      <input type="text" class="lf" id="zipIn" maxlength="5" placeholder="Zip code" inputmode="numeric" style="max-width:140px;font-size:16px;letter-spacing:2px;text-align:center;font-weight:600;">
      <div class="start-arrow" id="startArrow">
        <div class="start-arrow-inner">
          <svg class="start-chevron-left" viewBox="0 0 40 24"><path d="M36 4 L20 12 L36 20" stroke="#1a1a2e" stroke-width="4" fill="none" stroke-linecap="round" stroke-linejoin="round"/><path d="M22 4 L6 12 L22 20" stroke="#1a1a2e" stroke-width="4" fill="none" stroke-linecap="round" stroke-linejoin="round"/></svg>
          <span class="start-txt">START HERE</span>
        </div>
      </div>
    </div>
    <div class="btn-row">
      <button class="btn" onclick="submitZip()">Continue</button>
    </div>
    <div class="promo-banners">
      <a href="https://cat5concrete.com" target="_blank" class="promo-link">
        <img src="concrete-promo.png" alt="Need Concrete Only? Get an instant quote online" class="promo-img">
      </a>
      <a href="https://cat5steelbuildings.com/referral-program" target="_blank" class="promo-link">
        <img src="referral-promo.png" alt="Earn up to $500 per building - Steel Building Referral Program" class="promo-img">
      </a>
    </div>
  </div>

  <!-- STEP 1: BUILDING STYLE -->
  <div class="step" id="step1">
    <div class="step-q">WHAT TYPE OF BUILDING?</div>
    <div class="step-sub">Select the style that best fits your needs.</div>
    <div class="style-grid" id="styleGrid">
      <div class="scard" onclick="pickStyle(this,'Carport')">
        <img src="carport.png" alt="Carport">
        <div class="sl">Carport</div>
        <div class="ck"><svg class="cksvg" viewBox="0 0 24 24"><polyline points="20 6 9 17 4 12"/></svg></div>
      </div>
      <div class="scard" onclick="pickStyle(this,'Garage')">
        <img src="garage.png" alt="Garage">
        <div class="sl">Garage</div>
        <div class="ck"><svg class="cksvg" viewBox="0 0 24 24"><polyline points="20 6 9 17 4 12"/></svg></div>
      </div>
      <div class="scard" onclick="pickStyle(this,'Barn')">
        <img src="barn.png" alt="Barn">
        <div class="sl">Barn</div>
        <div class="ck"><svg class="cksvg" viewBox="0 0 24 24"><polyline points="20 6 9 17 4 12"/></svg></div>
      </div>
      <div class="scard" onclick="pickStyle(this,'Workshop')">
        <img src="workshop.png" alt="Workshop">
        <div class="sl">Workshop</div>
        <div class="ck"><svg class="cksvg" viewBox="0 0 24 24"><polyline points="20 6 9 17 4 12"/></svg></div>
      </div>
      <div class="scard" onclick="pickStyle(this,'Combo')">
        <img src="combo.png" alt="Combo">
        <div class="sl">Combo</div>
        <div class="ck"><svg class="cksvg" viewBox="0 0 24 24"><polyline points="20 6 9 17 4 12"/></svg></div>
      </div>
      <div class="scard" onclick="pickStyle(this,'Commercial')">
        <img src="commercial.png" alt="Commercial">
        <div class="sl">Commercial</div>
        <div class="ck"><svg class="cksvg" viewBox="0 0 24 24"><polyline points="20 6 9 17 4 12"/></svg></div>
      </div>
      <div class="scard" onclick="pickStyle(this,'Equipment Storage')">
        <img src="equipment.png" alt="Equipment Storage">
        <div class="sl">Equipment</div>
        <div class="ck"><svg class="cksvg" viewBox="0 0 24 24"><polyline points="20 6 9 17 4 12"/></svg></div>
      </div>
    </div>
    <div class="btn-row">
      <button class="btn-ghost btn" onclick="goStep(0)">Back</button>
      <button class="btn" id="styleBtn" onclick="confirmStyle()" disabled>Select a style</button>
    </div>
  </div>

  <!-- STEP 2: SIZE -->
  <div class="step" id="step2">
    <div class="step-q">WHAT SIZE DO YOU NEED?</div>
    <div class="step-sub">Select width, length, and wall height.</div>
    <div class="srow">
      <label>Width</label>
      <select class="sf" id="selW"><option value="">Select</option></select>
    </div>
    <div class="srow">
      <label>Length</label>
      <select class="sf" id="selL"><option value="">Select</option></select>
    </div>
    <div class="srow">
      <label>Height</label>
      <select class="sf" id="selH"><option value="">Select</option></select>
    </div>
    <div id="liftNote" style="display:none;background:rgba(212,168,83,0.1);border:1px solid rgba(212,168,83,0.25);border-radius:var(--r);padding:10px 14px;margin-top:4px;font-size:12px;color:var(--gd);">
      Heights 14' and above require a high lift installation.
    </div>
    <div class="btn-row">
      <button class="btn-ghost btn" onclick="goStep(1)">Back</button>
      <button class="btn" id="sizeBtn" onclick="confirmSize()" disabled>Continue</button>
    </div>
  </div>

  <!-- STEP 3: WIND RATING (NEW) -->
  <div class="step" id="step3">
    <div class="step-q">WIND RATING CERTIFICATION</div>
    <div class="step-sub">Select the wind speed certification for your building. Florida and coastal areas typically require 170 MPH or higher.</div>
    <div class="wind-grid" id="windGrid">
      <div class="wcard" onclick="pickWind(this,'140')">
        <div class="wmph">140</div>
        <div class="wlabel">MPH</div>
        <div class="wtag">Standard rating</div>
        <div class="ck"><svg class="cksvg" viewBox="0 0 24 24"><polyline points="20 6 9 17 4 12"/></svg></div>
      </div>
      <div class="wcard" onclick="pickWind(this,'170')">
        <div class="wmph">170</div>
        <div class="wlabel">MPH</div>
        <div class="wtag">Enhanced protection</div>
        <div class="ck"><svg class="cksvg" viewBox="0 0 24 24"><polyline points="20 6 9 17 4 12"/></svg></div>
      </div>
      <div class="wcard cat5" onclick="pickWind(this,'180')">
        <div class="wmph">180</div>
        <div class="wlabel">MPH</div>
        <div class="wtag">Maximum hurricane protection</div>
        <div class="cat5badge">CAT 5 RATED</div>
        <div class="ck"><svg class="cksvg" viewBox="0 0 24 24"><polyline points="20 6 9 17 4 12"/></svg></div>
      </div>
    </div>
    <div id="windWarning" style="display:none;background:rgba(200,85,58,0.1);border:1px solid rgba(200,85,58,0.25);border-radius:var(--r);padding:10px 14px;margin-top:12px;font-size:12px;color:var(--ac2);">
      Please select a wind rating to continue.
    </div>
    <div class="btn-row">
      <button class="btn-ghost btn" onclick="goStep(2)">Back</button>
      <button class="btn" id="windBtn" onclick="confirmWind()" disabled>Select a wind rating</button>
    </div>
  </div>

  <!-- STEP 4: DOORS -->
  <div class="step" id="step4">
    <div class="step-q">DOORS & WINDOWS</div>
    <div class="step-sub">How many of each do you need?</div>
    <div class="cgroup">
      <div class="citem">
        <div class="ci-l"><div class="ci-n">Garage / Rollup Doors</div><div class="ci-d">Select quantity then choose size</div></div>
        <div class="cbox"><button onclick="adj('gd',-1)">−</button><div class="cv" id="gdV">0</div><button onclick="adj('gd',1)">+</button></div>
      </div>
      <div id="gdSizeRow" style="display:none;margin-left:16px;"></div>
      <div class="citem">
        <div class="ci-l"><div class="ci-n">Walk-In Doors</div><div class="ci-d">Standard 36" man door</div></div>
        <div class="cbox"><button onclick="adj('wd',-1)">−</button><div class="cv" id="wdV">1</div><button onclick="adj('wd',1)">+</button></div>
      </div>
      <div class="citem">
        <div class="ci-l"><div class="ci-n">Windows</div><div class="ci-d">Standard 24" x 36"</div></div>
        <div class="cbox"><button onclick="adj('wn',-1)">−</button><div class="cv" id="wnV">0</div><button onclick="adj('wn',1)">+</button></div>
      </div>
    </div>
    <div class="btn-row">
      <button class="btn-ghost btn" onclick="goStep(3)">Back</button>
      <button class="btn" onclick="confirmDoors()">Continue</button>
    </div>
  </div>

  <!-- STEP 5: FRAME-OUTS -->
  <div class="step" id="step5">
    <div class="step-q">FRAME-OUTS</div>
    <div class="step-sub">Need any pre-framed openings for future doors, windows, or access points? Select how many and the size of each.</div>
    <div class="cgroup">
      <div class="citem">
        <div class="ci-l"><div class="ci-n">Frame-Outs</div><div class="ci-d">Pre-framed openings in the wall</div></div>
        <div class="cbox"><button onclick="adj('fo',-1)">−</button><div class="cv" id="foV">0</div><button onclick="adj('fo',1)">+</button></div>
      </div>
    </div>
    <div id="foSizeArea" style="display:none;">
      <div class="step-sub" style="margin-top:8px;margin-bottom:10px;font-weight:600;color:var(--tx);">Specify size for each frame-out:</div>
      <div id="foSizeList"></div>
    </div>
    <div class="btn-row">
      <button class="btn-ghost btn" onclick="goStep(4)">Back</button>
      <button class="btn" onclick="confirmFrameouts()">Continue</button>
      <button class="btn btn-ghost" onclick="D.frameouts=[];document.getElementById('foV').textContent='0';document.getElementById('foSizeArea').style.display='none';confirmFrameouts();">No frame-outs needed</button>
    </div>
  </div>

  <!-- STEP 6: LEAN-TO -->
  <div class="step" id="step6">
    <div class="step-q">LEAN-TO ADDITION</div>
    <div class="step-sub">Add a covered extension to one or both sides of your building.</div>

    <div style="margin:16px 0;text-align:center;">
      <div style="display:flex;gap:10px;justify-content:center;">
        <button class="btn" onclick="showLeanConfig(true)">Yes, Add a Lean-To</button>
        <button class="btn btn-ghost" onclick="skipLeanTo()">No, Skip</button>
      </div>
    </div>

    <div id="leanConfig" style="display:none;">
      <div style="margin:16px 0;text-align:center;">
        <label class="step-sub" style="font-weight:600;color:var(--tx);display:block;margin-bottom:8px;">Which side(s)?</label>
        <div style="display:flex;gap:10px;justify-content:center;flex-wrap:wrap;">
          <button class="btn btn-ghost lean-side-btn" onclick="pickLeanSide('left')">Left Side</button>
          <button class="btn btn-ghost lean-side-btn" onclick="pickLeanSide('right')">Right Side</button>
          <button class="btn btn-ghost lean-side-btn" onclick="pickLeanSide('both')">Both Sides</button>
        </div>
      </div>

      <div id="leanLeftDims" style="display:none;margin:14px 0;text-align:center;">
        <div class="step-sub" style="font-weight:600;color:var(--ac);margin-bottom:8px;">Left Side Lean-To</div>
        <div style="display:flex;gap:10px;justify-content:center;flex-wrap:wrap;">
          <div><label class="step-sub" style="display:block;margin-bottom:4px;">Width</label><select class="sf" id="leanLeftW"></select></div>
          <div><label class="step-sub" style="display:block;margin-bottom:4px;">Length</label><select class="sf" id="leanLeftL"></select></div>
          <div><label class="step-sub" style="display:block;margin-bottom:4px;">Height</label><select class="sf" id="leanLeftH"></select></div>
        </div>
      </div>

      <div id="leanRightDims" style="display:none;margin:14px 0;text-align:center;">
        <div class="step-sub" style="font-weight:600;color:var(--ac);margin-bottom:8px;">Right Side Lean-To</div>
        <div style="display:flex;gap:10px;justify-content:center;flex-wrap:wrap;">
          <div><label class="step-sub" style="display:block;margin-bottom:4px;">Width</label><select class="sf" id="leanRightW"></select></div>
          <div><label class="step-sub" style="display:block;margin-bottom:4px;">Length</label><select class="sf" id="leanRightL"></select></div>
          <div><label class="step-sub" style="display:block;margin-bottom:4px;">Height</label><select class="sf" id="leanRightH"></select></div>
        </div>
      </div>
    </div>

    <div class="btn-row" style="margin-top:20px;">
      <button class="btn-ghost btn" onclick="goStep(5)">Back</button>
      <button class="btn" id="leanContinueBtn" onclick="confirmLeanTo()" style="display:none;">Continue</button>
    </div>
  </div>

  <!-- STEP 7: OPTIONS -->
  <div class="step" id="step7">
    <div class="step-q">OPTIONS & SERVICES</div>
    <div class="step-sub">Select any additional options you'd like.</div>

    <!-- CONCRETE FEATURED CARD -->
    <div class="con-card" id="conCard" onclick="toggleConcrete()">
      <div class="con-top">
        <div class="con-left">
          <div class="con-check"><svg viewBox="0 0 24 24"><polyline points="20 6 9 17 4 12"/></svg></div>
          <div>
            <div class="con-title">ADD A CONCRETE PAD</div>
            <div class="con-sub" id="conDesc">Professionally poured and finished — ready for your building</div>
          </div>
        </div>
        <div class="con-price">
          <div class="big" id="conPriceDisplay">—</div>
          <div class="sm" id="conSqftDisplay">Included in quote</div>
        </div>
      </div>
    </div>

    <div class="con-divider">Additional Options</div>

    <div class="olist" id="optList">
      <div class="oitem" onclick="togOpt(this,'site_plans')">
        <div class="obox"><svg viewBox="0 0 24 24"><polyline points="20 6 9 17 4 12"/></svg></div>
        <div><div class="oi-n">Site Plans</div><div class="oi-d">Engineered site-specific plans</div></div>
      </div>
      <div class="oitem" onclick="togOpt(this,'permitting')">
        <div class="obox"><svg viewBox="0 0 24 24"><polyline points="20 6 9 17 4 12"/></svg></div>
        <div><div class="oi-n">Permitting Process</div><div class="oi-d">We handle all county paperwork</div></div>
      </div>
      <div class="oitem" onclick="togOpt(this,'site_and_permit')">
        <div class="obox"><svg viewBox="0 0 24 24"><polyline points="20 6 9 17 4 12"/></svg></div>
        <div><div class="oi-n">Site Plans + Permitting</div><div class="oi-d">We handle everything — bundled discount</div></div>
      </div>
      <div class="oitem" onclick="togOpt(this,'insulation')">
        <div class="obox"><svg viewBox="0 0 24 24"><polyline points="20 6 9 17 4 12"/></svg></div>
        <div><div class="oi-n">Insulation</div><div class="oi-d">2" Fiberglass or Reflective Double Bubble</div></div>
      </div>
      <div class="oitem" onclick="togOpt(this,'12gauge')">
        <div class="obox"><svg viewBox="0 0 24 24"><polyline points="20 6 9 17 4 12"/></svg></div>
        <div><div class="oi-n">12-Gauge Frame Upgrade</div><div class="oi-d">Heavy-duty framing with 20-year warranty</div></div>
      </div>
      <div class="oitem" onclick="togOpt(this,'26gauge')">
        <div class="obox"><svg viewBox="0 0 24 24"><polyline points="20 6 9 17 4 12"/></svg></div>
        <div><div class="oi-n">26-Gauge Metal Panels</div><div class="oi-d">Thicker panels for added durability</div></div>
      </div>
    </div>
    <div class="btn-row">
      <button class="btn-ghost btn" onclick="goStep(6)">Back</button>
      <button class="btn" onclick="confirmOptions()">Continue</button>
    </div>
  </div>

  <!-- STEP 8: SPECIAL INSTRUCTIONS + TIMELINE -->
  <div class="step" id="step8">
    <div class="step-q">ANYTHING ELSE WE SHOULD KNOW?</div>
    <div class="step-sub">Special requirements, specific use case, questions — anything helps us give you the best quote.</div>
    <textarea class="tarea" id="specialNotes" placeholder="Example: I need a 14x14 door on each end for drive-through access, storing two RVs and a boat, need electrical run, etc."></textarea>

    <div class="step-q" style="margin-top:24px;">ARE YOU STARTING THIS PROJECT SOON?</div>
    <div class="step-sub" style="margin-bottom:12px;">This helps us prioritize your quote.</div>
    <div class="rgroup" id="timelineGroup">
      <div class="ritem" onclick="pickRadio(this,'asap')">
        <div class="rdot"></div>
        <div><div class="ri-n">Yes — within 30 days</div></div>
      </div>
      <div class="ritem" onclick="pickRadio(this,'soon')">
        <div class="rdot"></div>
        <div><div class="ri-n">In the next 2–3 months</div></div>
      </div>
      <div class="ritem" onclick="pickRadio(this,'exploring')">
        <div class="rdot"></div>
        <div><div class="ri-n">Just exploring options for now</div></div>
      </div>
    </div>
    <div class="btn-row">
      <button class="btn-ghost btn" onclick="goStep(7)">Back</button>
      <button class="btn" onclick="confirmDetails()">Continue</button>
    </div>
  </div>

  <!-- STEP 9: CONTACT -->
  <div class="step" id="step9">
    <div class="step-q">WHERE SHOULD WE SEND YOUR QUOTE?</div>
    <div class="step-sub">We'll follow up with your complete estimate — usually within a few hours.</div>
    <input type="text" class="lf" id="leadName" placeholder="Your name">
    <input type="tel" class="lf" id="leadPhone" placeholder="Best phone number">
    <input type="email" class="lf" id="leadEmail" placeholder="Email (optional)">
    <div class="btn-row">
      <button class="btn-ghost btn" onclick="goStep(8)">Back</button>
      <button class="btn btn-big btn-green" onclick="submitLead()">GET MY FREE QUOTE</button>
    </div>
  </div>

  <!-- STEP 10: CONFIRMATION -->
  <div class="step" id="step10">
    <div class="conf">
      <div class="big-ck"><svg viewBox="0 0 24 24"><polyline points="20 6 9 17 4 12"/></svg></div>
      <h3 id="confName">YOU'RE ALL SET</h3>
      <p>We'll have your personalized quote ready ASAP! Our team is reviewing your building configuration now.</p>
      <p style="margin-top:12px;">Can't wait? Call us now:</p>
      <p style="margin-top:6px;"><a href="tel:8503208186" style="font-family:'Bebas Neue',sans-serif;font-size:24px;letter-spacing:3px;">(850) 320-8186</a></p>
      <p style="margin-top:16px;font-size:12px;color:var(--gd);">We handle everything — so you don't have to.</p>
    </div>
  </div>

</div>

<a href="tel:8503208186" class="float-call">
  <svg viewBox="0 0 24 24"><path d="M22 16.92v3a2 2 0 01-2.18 2 19.79 19.79 0 01-8.63-3.07 19.5 19.5 0 01-6-6 19.79 19.79 0 01-3.07-8.67A2 2 0 014.11 2h3a2 2 0 012 1.72c.127.96.361 1.903.7 2.81a2 2 0 01-.45 2.11L8.09 9.91a16 16 0 006 6l1.27-1.27a2 2 0 012.11-.45c.907.339 1.85.573 2.81.7A2 2 0 0122 16.92z"/></svg>
  Call Now
</a>

<script>
const D = {
  zip:'', style:'', width:0, length:0, height:0, windRating:'',
  garageDoors:0, garageDoorSize:'10x10',
  walkInDoors:1, windows:0, frameouts:[],
  options:[], leanTo:'none', leanLeft:null, leanRight:null, notes:'', timeline:'', name:'', phone:'', email:''
};

const STEPS = ['Location','Style','Size','Wind','Doors','Frame-Outs','Lean-To','Options','Details','Contact'];
const TOTAL_STEPS = 10;
let curStep = 0;

function goStep(n) {
  document.querySelectorAll('.step').forEach(s=>s.classList.remove('active'));
  document.getElementById('step'+n).classList.add('active');
  curStep = n;
  const pct = Math.round((n / TOTAL_STEPS) * 100);
  document.getElementById('progFill').style.width = pct+'%';
  const labels = document.getElementById('progLabels').children;
  for(let i=0;i<labels.length;i++) {
    labels[i].className = i<n ? 'done' : i===n ? 'active' : '';
  }
  document.getElementById('step'+n).scrollIntoView({behavior:'smooth',block:'start'});
}

// STEP 0: ZIP
function submitZip() {
  const z = document.getElementById('zipIn').value.trim();
  if(z.length!==5||!/^\d{5}$/.test(z)) { document.getElementById('zipIn').style.borderColor='var(--ac)'; return; }
  D.zip = z;
  goStep(1);
}
document.getElementById('zipIn').addEventListener('keydown',e=>{if(e.key==='Enter')submitZip();});
document.getElementById('zipIn').addEventListener('focus',()=>{const a=document.getElementById('startArrow');if(a)a.style.display='none';});

// STEP 1: STYLE
let selStyle = null;
function pickStyle(el, style) {
  document.querySelectorAll('.scard').forEach(c=>c.classList.remove('sel'));
  el.classList.add('sel');
  selStyle = style;
  const btn = document.getElementById('styleBtn');
  btn.disabled = false;
  btn.textContent = 'Continue with ' + style;
}
function confirmStyle() {
  if(!selStyle) return;
  D.style = selStyle;
  populateSize();
  goStep(2);
}

// STEP 2: SIZE
function populateSize() {
  const sw = document.getElementById('selW');
  const sl = document.getElementById('selL');
  const sh = document.getElementById('selH');
  sw.innerHTML = '<option value="">Select width</option>';
  for(let w=10;w<=60;w+=2) sw.innerHTML += '<option value="'+w+'">'+w+'\' wide</option>';
  sl.innerHTML = '<option value="">Select length</option>';
  for(let l=20;l<=400;l++) sl.innerHTML += '<option value="'+l+'">'+l+'\' long</option>';
  sh.innerHTML = '<option value="">Select height</option>';
  for(let h=8;h<=20;h++) sh.innerHTML += '<option value="'+h+'">'+h+'\' tall</option>';
  const checkSize = () => {
    const w=sw.value, l=sl.value, h=sh.value;
    document.getElementById('sizeBtn').disabled = !(w&&l&&h);
    document.getElementById('liftNote').style.display = (parseInt(h)>=14) ? 'block' : 'none';
  };
  sw.onchange = checkSize;
  sl.onchange = checkSize;
  sh.onchange = checkSize;
}
function confirmSize() {
  const w = document.getElementById('selW').value;
  const l = document.getElementById('selL').value;
  const h = document.getElementById('selH').value;
  if(!w||!l||!h) { alert('Please select width, length, and height.'); return; }
  D.width = parseInt(w);
  D.length = parseInt(l);
  D.height = parseInt(h);
  goStep(3);
}

// STEP 3: WIND RATING (NEW)
let selWind = null;
function pickWind(el, mph) {
  document.querySelectorAll('.wcard').forEach(c=>c.classList.remove('sel'));
  el.classList.add('sel');
  selWind = mph;
  document.getElementById('windWarning').style.display = 'none';
  const btn = document.getElementById('windBtn');
  btn.disabled = false;
  btn.textContent = 'Continue with ' + mph + ' MPH';
}
function confirmWind() {
  if(!selWind) {
    document.getElementById('windWarning').style.display = 'block';
    return;
  }
  D.windRating = selWind;
  goStep(4);
}

// STEP 4: DOORS
const GD_OPTIONS = '<option value="6x6">6x6</option><option value="6x7">6x7</option><option value="8x7">8x7</option><option value="8x8">8x8</option><option value="9x7">9x7</option><option value="9x8">9x8</option><option value="10x7">10x7</option><option value="10x8">10x8</option><option value="10x9">10x9</option><option value="10x10" selected>10x10</option><option value="10x10ch">10x10 (Chain Hoist)</option><option value="10x12ch">10x12 (Chain Hoist)</option><option value="12x8ch">12x8 (Chain Hoist)</option><option value="12x10ch">12x10 (Chain Hoist)</option><option value="12x12ch">12x12 (Chain Hoist)</option><option value="12x14ch">12x14 (Chain Hoist)</option><option value="14x11ch">14x11 (Chain Hoist)</option><option value="14x12ch">14x12 (Chain Hoist)</option><option value="14x14ch">14x14 (Chain Hoist)</option><option value="16x14ch">16x14 (Chain Hoist)</option>';

function renderGdSizes(count) {
  const container = document.getElementById('gdSizeRow');
  if(count === 0) { container.style.display='none'; container.innerHTML=''; return; }
  container.style.display='block';
  let h = '';
  for(let i=1; i<=count; i++) {
    h += '<div class="srow" style="margin-bottom:6px;"><label style="min-width:70px;">Door '+i+'</label><select class="sf gdsize-sel" data-door="'+i+'">'+GD_OPTIONS+'</select></div>';
  }
  container.innerHTML = h;
}

function adj(type, delta) {
  let el, min=0, max=6;
  if(type==='gd') { el=document.getElementById('gdV'); max=6; }
  else if(type==='wd') { el=document.getElementById('wdV'); max=6; }
  else if(type==='fo') { el=document.getElementById('foV'); max=20; }
  else { el=document.getElementById('wnV'); max=10; }
  let v = Math.max(min, Math.min(max, parseInt(el.textContent)+delta));
  el.textContent = v;
  if(type==='gd') { D.garageDoors = v; renderGdSizes(v); }
  else if(type==='wd') D.walkInDoors = v;
  else if(type==='fo') renderFrameouts(v);
  else D.windows = v;
}

// FRAME-OUT SIZE RENDERING
function renderFrameouts(count) {
  const area = document.getElementById('foSizeArea');
  const list = document.getElementById('foSizeList');
  if(count === 0) { area.style.display='none'; list.innerHTML=''; return; }
  area.style.display='block';
  let wOpts = '';
  for(let w=1;w<=20;w++) wOpts += '<option value="'+w+'">'+w+'\'</option>';
  let hOpts = '';
  for(let h=1;h<=20;h++) hOpts += '<option value="'+h+'">'+h+'\'</option>';
  let html = '';
  for(let i=1;i<=count;i++) {
    html += '<div class="srow" style="margin-bottom:8px;background:var(--sf);padding:10px 12px;border-radius:var(--r);border:1px solid var(--bd);"><label style="min-width:80px;font-weight:600;color:var(--tx);">Frame-Out '+i+'</label><select class="sf fo-w" data-fo="'+i+'" style="max-width:100px;">'+wOpts+'</select><span style="color:var(--tx2);font-size:12px;">wide x</span><select class="sf fo-h" data-fo="'+i+'" style="max-width:100px;">'+hOpts+'</select><span style="color:var(--tx2);font-size:12px;">tall</span></div>';
  }
  list.innerHTML = html;
}

function confirmFrameouts() {
  const foCount = parseInt(document.getElementById('foV').textContent);
  D.frameouts = [];
  if(foCount > 0) {
    document.querySelectorAll('.fo-w').forEach((sel, i) => {
      const h = document.querySelectorAll('.fo-h')[i];
      D.frameouts.push({ width: sel.value, height: h.value });
    });
  }
  updateConcretePrice();
  goStep(6);
}

function confirmDoors() {
  if(D.garageDoors > 0) {
    D.garageDoorSizes = [];
    document.querySelectorAll('.gdsize-sel').forEach(sel => {
      D.garageDoorSizes.push(sel.value);
    });
  }
  goStep(5);
}

// OPTIONS — populate concrete price
function updateConcretePrice() {
  const sq = D.width * D.length;
  document.getElementById('conPriceDisplay').textContent = sq.toLocaleString() + ' sq ft';
  document.getElementById('conSqftDisplay').textContent = 'Included in quote';
  document.getElementById('conDesc').textContent = D.width + "' x " + D.length + "' pad — professionally poured and finished";
}
function toggleConcrete() {
  const card = document.getElementById('conCard');
  card.classList.toggle('on');
  const idx = D.options.indexOf('concrete');
  if(idx > -1) D.options.splice(idx, 1); else D.options.push('concrete');
}
function togOpt(el, id) {
  if(id==='site_and_permit') {
    document.querySelectorAll('[data-opt="site_plans"],[data-opt="permitting"]').forEach(e=>{e.classList.remove('on');const i=D.options.indexOf(e.dataset.opt);if(i>-1)D.options.splice(i,1);});
  } else if(id==='site_plans'||id==='permitting') {
    document.querySelectorAll('[data-opt="site_and_permit"]').forEach(e=>{e.classList.remove('on');const i=D.options.indexOf('site_and_permit');if(i>-1)D.options.splice(i,1);});
  }
  el.classList.toggle('on');
  el.dataset.opt = id;
  const idx = D.options.indexOf(id);
  if(idx>-1) D.options.splice(idx,1); else D.options.push(id);
}
document.querySelectorAll('.oitem').forEach(el => {
  const onclick = el.getAttribute('onclick');
  const match = onclick.match(/'([^']+)'/);
  if(match) el.dataset.opt = match[1];
});

// STEP 6: LEAN-TO
function showLeanConfig(show) {
  document.getElementById('leanConfig').style.display = show ? 'block' : 'none';
  document.getElementById('leanContinueBtn').style.display = 'inline-block';
  if(!show) { D.leanTo = 'none'; confirmLeanTo(); }
}
function skipLeanTo() {
  D.leanTo = 'none'; D.leanLeft = null; D.leanRight = null;
  updateConcretePrice();
  goStep(7);
}
function pickLeanSide(side) {
  document.querySelectorAll('.lean-side-btn').forEach(b => b.classList.remove('on'));
  event.target.classList.add('on');
  D.leanTo = side;
  const maxW = D.width || 60;
  const maxL = D.length || 400;
  const maxH = D.height || 16;
  const leanMaxW = Math.floor(maxW / 2);
  function fillSel(id, max, step, suffix) {
    const sel = document.getElementById(id);
    if(!sel) return;
    sel.innerHTML = '<option value="">Select</option>';
    for(let v = step; v <= max; v += step) sel.innerHTML += '<option value="'+v+'">'+v+suffix+'</option>';
  }
  fillSel('leanLeftW', leanMaxW, 2, "' wide");
  fillSel('leanLeftL', maxL, 1, "' long");
  fillSel('leanLeftH', maxH, 1, "' tall");
  fillSel('leanRightW', leanMaxW, 2, "' wide");
  fillSel('leanRightL', maxL, 1, "' long");
  fillSel('leanRightH', maxH, 1, "' tall");
  document.getElementById('leanLeftDims').style.display = (side==='left'||side==='both') ? 'block' : 'none';
  document.getElementById('leanRightDims').style.display = (side==='right'||side==='both') ? 'block' : 'none';
}
function confirmLeanTo() {
  if(D.leanTo !== 'none') {
    if(D.leanTo === 'left' || D.leanTo === 'both') {
      D.leanLeft = { width: document.getElementById('leanLeftW').value, length: document.getElementById('leanLeftL').value, height: document.getElementById('leanLeftH').value };
    }
    if(D.leanTo === 'right' || D.leanTo === 'both') {
      D.leanRight = { width: document.getElementById('leanRightW').value, length: document.getElementById('leanRightL').value, height: document.getElementById('leanRightH').value };
    }
  }
  updateConcretePrice();
  goStep(7);
}

function confirmOptions() { goStep(8); }

// STEP 8: DETAILS
let selTimeline = null;
function pickRadio(el, val) {
  el.closest('.rgroup').querySelectorAll('.ritem').forEach(r=>r.classList.remove('on'));
  el.classList.add('on');
  selTimeline = val;
}
function confirmDetails() {
  D.notes = document.getElementById('specialNotes').value;
  D.timeline = selTimeline || 'not specified';
  goStep(9);
}

// STEP 9: SUBMIT
function submitLead() {
  const n = document.getElementById('leadName').value.trim();
  const p = document.getElementById('leadPhone').value.trim();
  const e = document.getElementById('leadEmail').value.trim();
  if(!n||!p) { alert('Please enter your name and phone number.'); return; }
  D.name = n; D.phone = p; D.email = e;
  D.timestamp = new Date().toISOString();
  D.source = 'landing-page-v1';

  const contactMethod = p ? 'Phone' : 'Email';
  const leadPriority = p ? 'HOT - Call ASAP' : 'WARM - Email Quote';

  const frameSummary = D.frameouts.length > 0
    ? D.frameouts.map((f,i) => 'Frame-Out '+(i+1)+': '+f.width+'\' x '+f.height+'\'').join(', ')
    : 'None';

  // Wind rating label for HubSpot
  const windLabel = D.windRating === '180' ? 'Yes (Cat 5 / 180mph)' : D.windRating === '170' ? '170mph Enhanced' : '140mph Standard';

  const quoteJson = JSON.stringify(D, null, 2);

  // ---- Netlify Forms submission ----
  try {
    const payload = {
      "form-name": "cat5-landing-leads",
      name: n, phone: p, email: e, zip: D.zip,
      buildingType: D.style,
      buildingSize: D.width + 'x' + D.length + 'x' + D.height,
      windRating: D.windRating + ' MPH',
      garageDoors: D.garageDoors > 0 ? (D.garageDoorSizes || []).join(', ') : '0',
      walkInDoors: String(D.walkInDoors),
      windows: String(D.windows),
      frameouts: frameSummary,
      options: D.options.join(', '),
      notes: D.notes, timeline: D.timeline,
      quoteJson: quoteJson
    };
    fetch("/", {
      method: "POST",
      headers: { "Content-Type": "application/x-www-form-urlencoded" },
      body: new URLSearchParams(payload).toString()
    })
    .then(r => console.log('Netlify form:', r.status))
    .catch(err => console.error('Netlify form error:', err));
  } catch(ex) { /* no-op */ }

  // ---- HubSpot CRM via Netlify Function ----
  try {
    const hubspotPayload = {
      name: n, phone: p, email: e, location: D.zip,
      buildingType: D.style,
      buildingSize: D.width + 'x' + D.length + 'x' + D.height,
      building_size: D.width + 'x' + D.length + 'x' + D.height,
      roofStyle: 'Vertical (Standard)',
      cat5Wind: windLabel,
      upgrades: D.options.join(', '),
      quote_details: [
        'Priority: ' + leadPriority,
        'Source: Landing Page Configurator',
        'Building: ' + D.style + ' ' + D.width + 'x' + D.length + 'x' + D.height,
        'Wind Rating: ' + D.windRating + ' MPH' + (D.windRating === '180' ? ' (Cat 5)' : ''),
        'Garage Doors: ' + (D.garageDoors > 0 ? (D.garageDoorSizes || []).join(', ') : 'None'),
        'Walk-In Doors: ' + D.walkInDoors,
        'Windows (24x36): ' + D.windows,
        'Frame-Outs: ' + frameSummary,
        'Options: ' + (D.options.length ? D.options.join(', ') : 'None'),
        'Timeline: ' + D.timeline,
        'Notes: ' + (D.notes || 'None'),
        'ZIP: ' + D.zip
      ].join('\n')
    };
    fetch('/.netlify/functions/create-hubspot-contact', {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify(hubspotPayload)
    })
    .then(r => r.json())
    .then(result => console.log('HubSpot contact created:', result))
    .catch(err => console.error('HubSpot error:', err));
  } catch(ex) { console.error('HubSpot error:', ex); }

  console.log('LEAD CAPTURED:', quoteJson);
  document.getElementById('confName').textContent = "YOU'RE ALL SET, " + n.toUpperCase();
  goStep(10);
}

// Phone number formatting
document.addEventListener('DOMContentLoaded', function() {
  const ph = document.getElementById('leadPhone');
  if(ph) {
    ph.addEventListener('input', function(e) {
      let v = e.target.value.replace(/\D/g, '');
      if(v.length >= 6) v = '(' + v.slice(0,3) + ') ' + v.slice(3,6) + '-' + v.slice(6,10);
      else if(v.length >= 3) v = '(' + v.slice(0,3) + ') ' + v.slice(3);
      e.target.value = v;
    });
  }
});
</script>

<!-- Netlify Forms (hidden) -->
<form name="cat5-landing-leads" method="POST" data-netlify="true" netlify-honeypot="bot-field" hidden>
  <input name="bot-field" />
  <input type="text" name="name" />
  <input type="text" name="phone" />
  <input type="email" name="email" />
  <input type="text" name="zip" />
  <input type="text" name="buildingType" />
  <input type="text" name="buildingSize" />
  <input type="text" name="windRating" />
  <input type="text" name="garageDoors" />
  <input type="text" name="walkInDoors" />
  <input type="text" name="windows" />
  <input type="text" name="frameouts" />
  <input type="text" name="options" />
  <input type="text" name="notes" />
  <input type="text" name="timeline" />
  <textarea name="quoteJson"></textarea>
</form>
</body>
</html>
